\documentclass[12pt]{article}
\usepackage[spanish]{babel}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{ragged2e}
\usepackage{enumitem}
\usepackage{fancyvrb}
\usepackage[official]{eurosym}
\usepackage[utf8x]{inputenc} 
\graphicspath{ {images/} }
\begin{document}
\begin{figure}[t]
\title{Taller 1}
\includegraphics[{width=3cm, height=4cm}]{logouv.jpg}
\end{figure}
\title{Universidad del Valle \\ 
		Escuela de Ingeniería de Sistemas y Computación \\
		Programación por Restricciones \\
		Desarrollo: Taller Modelamiento e Implementación CSPs}
\author{Juan Marcos Caicedo Mejía (1730504-3743)}
\date{2020}
\maketitle

\newpage

\begin{center}
\large
\textbf{PARTE 1 (CSPs)}
\end{center}

\begin{flushleft}
\textbf{1. Sudoku}
\end{flushleft}

\begin{itemize}
\item Variables:
\begin{itemize}
\item \begin{verbatim}
subcuadricula
\end{verbatim} Representa la dimensión de cada subcuadricula. En un Sudoku común y corriente esto tiene un valor de 3. 
\item \begin{verbatim}
cuadricula
\end{verbatim} Representa la dimensión de toda la cuadricula grande (la que contiene las subcuadriculas). Al igual que la variable anterior, en un Sudoku común esta variable tiene el valor de 9.  
\item \begin{verbatim}
entrada
\end{verbatim} Representa el tablero de Sudoku inicial que posee algunos números preestablecidos. En esta matriz, el 0 representa una celda vacía.  
\item \begin{verbatim}
salida
\end{verbatim} Representa el tablero variable sobre el cual las restricciones tomarán acción y construirán la solución del Sudoku.
\item \begin{verbatim}
subcuadricula_uno
\end{verbatim} Es un array que contiene los 9 números correspondientes a la primera subcuadricula
\item \begin{verbatim}
subcuadricula_dos
\end{verbatim} Es un array que contiene los 9 números correspondientes a la segunda subcuadricula
\item \begin{verbatim}
subcuadricula_tres
\end{verbatim} Es un array que contiene los 9 números correspondientes a la tercera subcuadricula
\item \begin{verbatim}
subcuadricula_cuatro
\end{verbatim} Es un array que contiene los 9 números correspondientes a la cuarta subcuadricula
\item \begin{verbatim}
subcuadricula_cinco
\end{verbatim} Es un array que contiene los 9 números correspondientes a la quinta subcuadricula
\item \begin{verbatim}
subcuadricula_seis
\end{verbatim} Es un array que contiene los 9 números correspondientes a la sexta subcuadricula
\item \begin{verbatim}
subcuadricula_siete
\end{verbatim} Es un array que contiene los 9 números correspondientes a la séptima subcuadricula
\item \begin{verbatim}
subcuadricula_ocho
\end{verbatim} Es un array que contiene los 9 números correspondientes a la octava subcuadricula
\item \begin{verbatim}
subcuadricula_nueve
\end{verbatim} Es un array que contiene los 9 números correspondientes a la novena subcuadricula
\end{itemize}
\item Dominios:
\begin{itemize}
\item \begin{verbatim}
dimension_cuadricula = 1..cuadricula
\end{verbatim}
Este dominio es útil para poder acceder a todas las celdas de la cuadrícula grande, pues es el que demarca que los números que estén en el tablero solo sean del 1 al 9. 
\end{itemize}
\item Restricciones:
\begin{itemize}
\item Una primera restricción que solo sirve para poder copiar los datos del tablero inicial del Sudoku consiste en que si alguna celda en el tablero de la variable de entrada contiene un número mayor que 0, este mismo número se copie en la misma ubicación en el tablero de salida, si no es así, es decir, hay una celda con 0, se omite su valor:
\begin{equation*}
\forall i,j \in \{1,9\} \mid entrada(i,j) > 0 \therefore salida(i,j) = entrada(i,j)
\end{equation*}
\item Luego, una restricción importante es para garantizar que los números de todas las filas sean distintos:
\begin{equation*}
\forall i,j \in \{1,9\} \mid
\end{equation*}
\begin{equation*}
x_{1,1} \neq x_{1,2} \neq x_{1,3} \neq ... \neq x_{1,9}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{2,1} \neq x_{2,2} \neq x_{2,3} \neq ... \neq x_{2,9}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
...
\end{equation*}
\begin{equation*}
x_{9,1} \neq x_{9,2} \neq x_{9,3} \neq ... \neq x_{9,9}
\end{equation*}
\item Luego, una restricción importante es para garantizar que los números de todas las columnas sean distintos:
\begin{equation*}
\forall i,j \in \{1,9\} \mid
\end{equation*}
\begin{equation*}
x_{1,1} \neq x_{2,1} \neq x_{3,1} \neq ... \neq x_{9,1}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{1,2} \neq x_{2,2} \neq x_{3,2} \neq ... \neq x_{2,9}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
...
\end{equation*}
\begin{equation*}
x_{1,9} \neq x_{2,9} \neq x_{3,9} \neq ... \neq x_{9,9}
\end{equation*}
Donde $x_{i,j}$ es el número de la celda en la posición $(i,j)$.
\item Luego, usando las variables de: \begin{verbatim}
subcuadricula_uno
\end{verbatim} hasta \begin{verbatim}
subcuadricula_nueve
\end{verbatim}
Se impusieron las restricciones que permiten que en cada subcuadrícula no se repitan los números del 1 al 9. Por cada variable de subcuadricula (que contiene los numeros de dicha subcuadricula) se impuso la restricción de \begin{verbatim}
alldifferent
\end{verbatim}
Para la
\begin{verbatim}
subcuadricula_uno
\end{verbatim}
La restricción sería así:
\begin{equation*}
x_{1,1} \neq x_{1,2} \neq x_{1,3}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{2,1} \neq x_{2,2} \neq x_{2,3}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{3,1} \neq x_{3,2} \neq x_{3,3}
\end{equation*}
Para la
\begin{verbatim}
subcuadricula_dos
\end{verbatim}
La restricción sería así:
\begin{equation*}
x_{1,4} \neq x_{1,5} \neq x_{1,6}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{2,4} \neq x_{2,5} \neq x_{2,6}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{3,4} \neq x_{3,5} \neq x_{3,6}
\end{equation*}
Para la
\begin{verbatim}
subcuadricula_tres
\end{verbatim}
La restricción sería así:
\begin{equation*}
x_{1,7} \neq x_{1,8} \neq x_{1,9}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{2,7} \neq x_{2,8} \neq x_{2,9}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{3,7} \neq x_{3,8} \neq x_{3,9}
\end{equation*}
Para la
\begin{verbatim}
subcuadricula_cuatro
\end{verbatim}
La restricción sería así:
\begin{equation*}
x_{4,1} \neq x_{4,2} \neq x_{4,3}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{5,1} \neq x_{5,2} \neq x_{5,3}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{6,1} \neq x_{6,2} \neq x_{6,3}
\end{equation*}
Para la
\begin{verbatim}
subcuadricula_cinco
\end{verbatim}
La restricción sería así:
\begin{equation*}
x_{4,4} \neq x_{4,5} \neq x_{4,6}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{5,4} \neq x_{5,5} \neq x_{5,6}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{6,4} \neq x_{6,5} \neq x_{6,6}
\end{equation*}
Para la
\begin{verbatim}
subcuadricula_seis
\end{verbatim}
La restricción sería así:
\begin{equation*}
x_{4,7} \neq x_{4,8} \neq x_{4,9}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{5,7} \neq x_{5,8} \neq x_{5,9}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{6,7} \neq x_{6,8} \neq x_{6,9}
\end{equation*}
Para la
\begin{verbatim}
subcuadricula_siete
\end{verbatim}
La restricción sería así:
\begin{equation*}
x_{7,1} \neq x_{7,2} \neq x_{7,3}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{8,1} \neq x_{8,2} \neq x_{8,3}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{9,1} \neq x_{9,2} \neq x_{9,3}
\end{equation*}
Para la
\begin{verbatim}
subcuadricula_ocho
\end{verbatim}
La restricción sería así:
\begin{equation*}
x_{7,4} \neq x_{7,5} \neq x_{7,6}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{8,4} \neq x_{8,5} \neq x_{8,6}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{9,4} \neq x_{9,5} \neq x_{9,6}
\end{equation*}
Para la
\begin{verbatim}
subcuadricula_nueve
\end{verbatim}
La restricción sería así:
\begin{equation*}
x_{7,7} \neq x_{7,8} \neq x_{7,9}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{8,7} \neq x_{8,8} \neq x_{8,9}
\end{equation*}
\begin{equation*}
\land
\end{equation*}
\begin{equation*}
x_{9,7} \neq x_{9,8} \neq x_{9,9}
\end{equation*}
\end{itemize}
\end{itemize}

\newpage

\begin{flushleft}
\textbf{3. Secuencia Mágica}
\end{flushleft}

\begin{itemize}
\item Variables:
\begin{itemize}
\item \begin{verbatim}
n
\end{verbatim} La variable (ingresada por el usuario mediante el IDE o proveída por un archivo de datos .dzn), representa la longitud de la secuencia mágica.
\end{itemize}
\item Dominios:
\begin{itemize}
\item \begin{verbatim}
dominio = 0..n-1
\end{verbatim} Este dominio caracteriza dos cosas: el tamaño de la secuencia mágica (el tamaño del arreglo que la representa) y los posibles valores que toman los números dentro de la secuencia mágica.
\end{itemize}
\item Restricciones:
\begin{itemize}
\item Llamemos $ocurre$ a un predicado que recibe una lista $l$ y un número $x$, así, $ocurre(l,x)$ arroja el número de ocurrencias del número $x$ en la lista $l$. Otro predicado puede ser $posicion$ que dada una lista $l$ y un número $x$, retorna la posición del número $x$ en la lista $l$ (indexando desde 0). La restricción principal del problema consiste en que la secuencia mágica se caracteriza porque el número $i$ ocurre exactamente $x_{i}$ veces en la secuencia. Así, la restricción podría modelarse:
\begin{equation*}
\forall x \in l, ocurre(l, posicion(l, x)) = x
\end{equation*}
Esto quiere decir que el número de la posición de $x$ en la lista $l$ debe ocurrir $x$ veces en la lista $l$.
\item Una restricción redundante adicional, dicta que la suma de todos los números en la secuencia debe sumar el número $n$ (longitud de la secuencia):
\begin{equation*}
\sum_{i=0}^{n-1} x_{i} = n
\end{equation*}
Donde $x_{i}$ es el i-ésimo elemento de la secuencia mágica.
\item Otra restricción adicional, dice que la suma de cada elemento de la secuencia multiplicada por $i-1$ debe ser igual a 0:
\begin{equation*}
\sum_{i=0}^{n-1} x_{i}*(i-1) = 0
\end{equation*}
Donde $x_{i}$ es el i-ésimo elemento de la secuencia mágica.
\end{itemize}
\end{itemize}

\newpage

\begin{flushleft}
\textbf{4. Acertijo Lógico}
\end{flushleft}

\begin{itemize}
\item Variables:
\begin{itemize}
\item \begin{verbatim}
apellido_juan, apellido_oscar, apellido_dario
\end{verbatim}
Son las variables que corresponden a los apellidos de cada persona: Juan, Oscar y Dario. Los posibles valores que pueden tomar dichas variables son los elementos del dominio (tipo enumerado) \begin{verbatim}
APELLIDOS
\end{verbatim}
\item \begin{verbatim}
musica_juan, musica_oscar, musica_dario
\end{verbatim}
Son las variables que corresponden a la musica preferida de cada persona: Juan, Oscar y Dario. Los posibles valores que pueden tomar dichas variables son los elementos del dominio (tipo enumerado) \begin{verbatim}
MUSICA
\end{verbatim}
\item \begin{verbatim}
edad_juan, edad_oscar, edad_dario
\end{verbatim}
Son las variables que corresponden a la edad de cada persona: Juan, Oscar y Dario. Los posibles valores que pueden tomar dichas variables son los elementos del dominio (tipo enumerado) \begin{verbatim}
EDADES
\end{verbatim}
\end{itemize}
\item Dominios:
\begin{itemize}
\item \begin{verbatim}
APELLIDOS = {Gonzalez, Garcia, Lopez}
\end{verbatim}
Los posibles valores de los apellidos, dados por el enunciado del problema.
\item \begin{verbatim}
MUSICA = {Clasica, Pop, Jazz}
\end{verbatim}
Los posibles valores de la música preferida, dados por el enunciado del problema.
\item \begin{verbatim}
EDADES = 24..26
\end{verbatim}
Los posibles valores de las edades, de 24 a 26 años.
\end{itemize}
\item Restricciones:
Antes podríamos considerar los siguientes predicados:
\begin{enumerate}
\item $apellido(x,y) = $ La persona $x$ se apellida $y$
\item $musica(x,y) = $ La música favorita de la persona $x$ es $y$
\item $edad(x,y) = $ La persona $x$ tiene $y$ años
\end{enumerate}
$\rightarrow$ Restricciones:
\begin{itemize}
\item $\neg apellido(Juan, Gonzalez)$ \\ (Juan no se apellida González, esto se infiere al decir que Juan es mayor que González)
\item $\neg apellido(Oscar, Lopez)$ \\ (Oscar no se apellida López)
\item $\forall x \mid x \in APELLIDOS$ \\ $apellido(Juan,x_{i}) \land apellido(Oscar,x_{i+1}) \land apellido(Dario,x_{i+2}) \Rightarrow x_{i} \neq x_{i+1} \neq x_{i+2}$ \\ (Todos se deben apellidar distinto)
\item $\neg musica(Dario, Jazz)$ \\ (A Dario no le gusta el Jazz)
\item $\exists x \in APELLIDOS \land \exists y \in MUSICA \mid apellido(Oscar,x) \land x = Gonzalez \Rightarrow (musica(Oscar, y) \land y = Clasica)$
\item $\exists x \in APELLIDOS \land \exists y \in MUSICA \mid apellido(Dario,x) \land x = Gonzalez \Rightarrow (musica(Dario, y) \land y = Clasica)$ \\ (Como Juan no puede ser González, solo Oscar y Dario pueden apellidarse González, y si alguno de los dos se apellida González, su música favorita debe ser la clásica)
\item $\forall y \mid y \in MUSICA$ \\ $musica(Juan,y_{i}) \land musica(Oscar,y_{i+1}) \land musica(Dario,y_{i+2}) \Rightarrow y_{i} \neq y_{i+1} \neq y_{i+2}$ \\ (A cada uno le gusta un estilo musical distinto)
\item $edad(Oscar, 25)$ \\ (Oscar tiene 25 años)
\item $\exists x,y \in EDADES \mid$ \\ $ apellido(Oscar, Gonzalez) \Rightarrow edad(Juan,x) \land edad(Oscar,y) \land x > y$ \\ (Si Oscar se apellida Gonzalez, como Juan debe ser mayor que Gonzalez, Juan debería ser mayor que Oscar)
\item $\exists x,y \in EDADES \mid$ \\ $ apellido(Dario, Gonzalez) \Rightarrow edad(Juan,x) \land edad(Dario,y) \land x > y$ \\ (Si Dario se apellida Gonzalez, como Juan debe ser mayor que Gonzalez, Juan debería ser mayor que Dario)
\item $musica(Juan, Pop) \Rightarrow \exists x \in APELLIDOS \land \exists y \in EDADES \mid apellido(Juan, x) \land edad(Juan, y) \land x \neq Garcia \land y \neq 24$ \\
(Si Juan llegase a ser el fan de la música Pop, no puede apellidarse García ni tener 24 años)
\item $musica(Oscar, Pop) \Rightarrow \exists x \in APELLIDOS \land \exists y \in EDADES \mid apellido(Oscar, x) \land edad(Oscar, y) \land x \neq Garcia \land y \neq 24$ \\
(Si Oscar llegase a ser el fan de la música Pop, no puede apellidarse García ni tener 24 años)
\item $musica(Dario, Pop) \Rightarrow \exists x \in APELLIDOS \land \exists y \in EDADES \mid apellido(Dario, x) \land edad(Dario, y) \land x \neq Garcia \land y \neq 24$ \\
(Si Dario llegase a ser el fan de la música Pop, no puede apellidarse García ni tener 24 años)
\end{itemize}
\end{itemize}

\newpage

\begin{flushleft}
\textbf{5. Ubicación de personas en una reunión}
\end{flushleft}

\begin{itemize}
\item Variables:
\begin{itemize}
\item \begin{verbatim}
n
\end{verbatim}
Denota el número $n$ de personas en la reunión
\item \begin{verbatim}
cantidad_nexts
\end{verbatim}
Denota el número de restricciones de vecindad <<next>>, es decir, cuantas duplas hay en el array de next
\item \begin{verbatim}
cantidad_separates
\end{verbatim}
Denota el número de restricciones de no vecindad <<separate>>, es decir, cuantas duplas hay en el array de separate
\item \begin{verbatim}
cantidad_distancias
\end{verbatim}
Denota el número de restricciones de distancia entre personas <<distancia>>, es decir, cuantas tripletas hay en el array de distancia
\item \begin{verbatim}
entrada
\end{verbatim}
Es el arreglo que contiene las personas que saldrán en la foto. Todos sus elementos deben pertenecer al dominio del conjunto enumerado
\begin{verbatim}
PERSONAS
\end{verbatim}
\item \begin{verbatim}
next
\end{verbatim}
Es el arreglo que contiene las restricciones de proximidad entre una persona en la foto y otra. (cada dupla significa que una persona debe estar al lado de la otra)
\item \begin{verbatim}
separate
\end{verbatim}
Es el arreglo que contiene las restricciones de NO proximidad entre una persona en la foto y otra. (cada dupla significa que una persona no puede estar al lado de la otra)
\item \begin{verbatim}
distancia
\end{verbatim}
Es el arreglo que contiene las restricciones sobre distancia de separación entre una persona u otra. (cada tripleta significa que la primera persona debe estar separada de la otra persona por máximo un determinado número de personas)
\item \begin{verbatim}
salida
\end{verbatim}
Es el arreglo que contiene las variables de decisión sobre las cuales se aplican las restricciones apropiadas. Sus elementos también pertenecen al conjunto enumerado de
\begin{verbatim}
PERSONAS
\end{verbatim}
\end{itemize}
\item Dominios:
\begin{itemize}
\item \begin{verbatim}
PERSONAS
\end{verbatim}
El conjunto de las posibles personas que saldrán en la foto
\item \begin{verbatim}
DOMINIO1 = 1..n
\end{verbatim}
Dominio de 1 hasta el número $n$ de personas en la foto
\item \begin{verbatim}
DOMINIO2 = 1..cantidad_nexts
\end{verbatim}
Dominio que es útil para saber cuántas restricciones de next hay
\item \begin{verbatim}
DOMINIO3 = 1..cantidad_separates
\end{verbatim}
Dominio que es útil para saber cuántas restricciones de separate hay
\item \begin{verbatim}
DOMINIO4 = 1..cantidad_distancias
\end{verbatim}
Dominio que es útil para saber cuántas restricciones de distancia hay
\end{itemize}
\item Restricciones:
\begin{itemize}
\item Todas las personas en la fila de la foto deben ser distintas:
\begin{equation*}
\forall x \mid x \in PERSONAS \land x_{0}, x_{1}, ..., x_{i-2}, x_{i-1} \in salida
\end{equation*}
\begin{equation*}
x_{0} \neq x_{1} \neq ... \neq x_{i-2} \neq x_{i-1}
\end{equation*}
\item Restricciones next:
\begin{equation*}
\forall i \in DOMINIO1, j \in DOMINIO2
\end{equation*}
\begin{equation*}
salida(i) = entrada(next(j,1)) \land i = 1 \Rightarrow salida(i+1) = entrada(next(j,2))
\end{equation*}
\begin{equation*}
salida(i) = entrada(next(j,1)) \land i = 8 \Rightarrow salida(i-1) = entrada(next(j,2))
\end{equation*}
\begin{equation*}
salida(i) = entrada(next(j,1)) \land (i \neq 1 \land i \neq 8) \Rightarrow
\end{equation*}
\begin{equation*}
salida(i+1) = entrada(next(j,2)) \lor salida(i-1) = entrada(next(j,2))
\end{equation*}
\item Restricciones separate:
\begin{equation*}
\forall i \in DOMINIO1, j \in DOMINIO3
\end{equation*}
\begin{equation*}
salida(i) = entrada(separate(j,1)) \land i = 1 \Rightarrow salida(i+1) \neq entrada(separate(j,2))
\end{equation*}
\begin{equation*}
salida(i) = entrada(separate(j,1)) \land i = 8 \Rightarrow salida(i-1) \neq entrada(separate(j,2))
\end{equation*}
\begin{equation*}
salida(i) = entrada(separate(j,1)) \land (i \neq 1 \land i \neq 8) \Rightarrow
\end{equation*}
\begin{equation*}
salida(i+1) \neq entrada(separate(j,2)) \lor salida(i-1) \neq entrada(separate(j,2))
\end{equation*}
\item Restricciones distancia:
\begin{equation*}
\forall i,k \in DOMINIO1, j \in DOMINIO4
\end{equation*}
\begin{equation*}
salida(i) = entrada(distancia(j,1)) \land salida(k) = entrada(distancia(j,2)) \Rightarrow
\end{equation*}
\begin{equation*}
|i-k| \leq distancia(j,3)+1
\end{equation*}
\end{itemize}
\end{itemize}

\newpage

\begin{flushleft}
\textbf{6. Construcción de un rectángulo}
\end{flushleft}

\begin{itemize}
\item Variables:
\begin{itemize}
\item a
\end{itemize}
\item Dominios:
\begin{itemize}
\item b
\end{itemize}
\item Restricciones:
\begin{itemize}
\item c
\end{itemize}
\end{itemize}

\newpage

\begin{center}
\large
\textbf{PARTE 2 (COPs)}
\end{center}

\begin{flushleft}
\textbf{7. Construcción de Transformadores}
\end{flushleft}

\begin{itemize}
\item Variables:
\begin{itemize}
\item a
\end{itemize}
\item Dominios:
\begin{itemize}
\item b
\end{itemize}
\item Restricciones:
\begin{itemize}
\item c
\end{itemize}
\item Función objetivo:
\end{itemize}

\newpage

\begin{flushleft}
\textbf{8. Producción de Gasolina}
\end{flushleft}

\begin{itemize}
\item Variables:
\begin{itemize}
\item a
\end{itemize}
\item Dominios:
\begin{itemize}
\item b
\end{itemize}
\item Restricciones:
\begin{itemize}
\item c
\end{itemize}
\item Función objetivo:
\end{itemize}

\end{document}